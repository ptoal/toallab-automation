- name: create a ovirt rhel template
  hosts: localhost
  gather_facts: False
  connection: local
  become: no

  vars:
    ansible_python_interpreter: "{{ ansible_playbook_python }}"
    local_account_password: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          61613832333566373533336138376664326363663461316161363437336364346164633661393964
          3639373438663437656335646263323033343962336362380a393538363837306339356336646665
          35336463346435633263633437346236656664306561656333383236633362393062393437663233
          6539366264353433650a653065316239643333313539613330306534643361636535336564366430
          39336361313035393436383538313737383535363665383236636164353434336138
    local_administrator_password: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          61613832333566373533336138376664326363663461316161363437336364346164633661393964
          3639373438663437656335646263323033343962336362380a393538363837306339356336646665
          35336463346435633263633437346236656664306561656333383236633362393062393437663233
          6539366264353433650a653065316239643333313539613330306534643361636535336564366430
          39336361313035393436383538313737383535363665383236636164353434336138
    windows_distro_name: 2019_standard # this needs to be one of the standard values see 'os_short_names' var
    template_vm_name: win2019_template_apr6
    template_vm_root_disk_size: 30
    template_vm_guest_id: windows_2019x64
    template_vm_memory: 4096
    template_timezone: 'GMT Standard Time'
    template_vm_cpu: 4
    template_vm_efi: false # you need to install efi file to use this, false should be fine in most cases
    iso_file_name: '17763.737.190906-2324.rs5_release_svc_refresh_SERVER_EVAL_x64FRE_en-us_1.iso' # name of the iso file
    iso_image_index: '1' # put index number here from the order inside the iso, for example 1 - standard, 2 - core etc
    iso_product_key: ''
    instance_wait_connection_timeout: 1800

    virtio_iso_url: http://webserver.toal.ca/images/virtio-win.iso
    vm_ansible_port: 5986
    vm_ansible_winrm_transport: credssp
    vm_upgrade_powershell: false # only needed for 2008 R2
    install_updates: False

    ovirt_datacenter: ToalLab
    ovirt_cluster: Lab
    ovirt_datastore: ssdvdo0
    ovirt_export_domain: ssdvdo0
    ovirt_data_domain: ssdvdo0
    ovirt_iso_domain: NAS_ISO

    template_vm_network_name: sandbox
    template_vm_ip_address: 192.168.18.41
    template_vm_netmask: 255.255.240.0
    template_vm_gateway: 192.168.16.1
    template_vm_domain: sandbox.toal.ca
    template_vm_dns_servers:
    - 192.168.16.1

  roles:
    - oatakan.windows_ovirt_template
