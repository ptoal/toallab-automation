---
- name: Set Up DHCP System
  hosts: dhcp-server
  become: true

  tasks:
    - name: DHCP Daemon is installed
      apt:
        name: isc-dhcp-server
        state: latest
      notify: Restart DHCPD

    - name: Generate dhcpd.conf
      template:
        src: dhcpd.conf.j2
        dest: "{{ dhcpd_conf_path }}"

  handlers:
    - name: Restart DHCPD
      service: 
        name: isc-dhcpd-server
        state: restarted